#!/usr/bin/env bash
# This script parses an Apache log file from stdin, groups by IP and HTTP status code,
# and prints the occurrence count, IP, and code, sorted descending by count.

awk '{ ip=$1; code=$(NF-1); key=ip " " code; count[key]++ } END { for (k in count) print count[k], k }' \
| sort -nr'
